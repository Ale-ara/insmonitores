<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>L2ro • Galeria de Prints</title>

<style>
:root{
  --ins:#0059a7;--fundo:#0a0a0f;--texto:#f4f4f4;
}

body{
  margin:0;font-family:'Poppins',sans-serif;
  background:var(--fundo);color:var(--texto);
  overflow:hidden;
}

html,body{cursor:none}

.custom-cursor{
  position:fixed;top:0;left:0;width:32px;height:32px;
  pointer-events:none;transform:translate(-50%,-50%);
  z-index:9999;
}
.custom-cursor img{width:100%;height:100%}

/* LOADING */
#loading{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:#000c;display:flex;align-items:center;
  justify-content:center;flex-direction:column;
  z-index:99999;
  font-size:18px;color:#fff;
}
.loader{
  border:5px solid #fff3;border-top:5px solid var(--ins);
  border-radius:50%;width:55px;height:55px;
  animation:spin 1s linear infinite;margin-bottom:12px;
}
@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

/* APP */
.app {display:flex;flex-direction:column;height:100vh;width:100vw;}

.header{
  display:flex;align-items:center;gap:12px;
  padding:16px 22px;
  background:linear-gradient(90deg,var(--ins) 20%, rgba(16,22,98,0.7) 100%);
  position:relative;z-index:2;
}
.header .inner{display:flex;align-items:center;gap:12px;position:relative;z-index:3}
.logo {width:56px}

.main{flex:1;display:flex;gap:18px;padding:22px;align-items:flex-start;overflow:auto}
.left{flex:1;min-width:320px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:18px}

.pasta{
  background:rgba(255,255,255,0.03);padding:18px;border-radius:12px;
  text-align:center;cursor:pointer;border:1px solid rgba(255,255,255,0.02);
  transition:transform .18s, box-shadow .18s;
}
.pasta:hover{transform:translateY(-6px);box-shadow:0 18px 60px rgba(0,0,0,0.5)}
.pasta img{width:68px}
.pasta h3{margin:10px 0 6px;color:var(--ins)}

.right{
  width:520px;max-width:44%;min-width:320px;
  background:rgba(255,255,255,0.03);
  padding:18px;border-radius:12px;
  border:1px solid rgba(255,255,255,0.02);
  height:calc(100vh - 120px);
  overflow:auto;
}

.preview{display:flex;flex-direction:column;align-items:center;gap:12px}
.preview img{
  max-width:100%;max-height:60vh;border-radius:8px;
  object-fit:contain;box-shadow:0 18px 60px rgba(0,0,0,0.6);
}

.meta{display:flex;gap:12px;align-items:center;width:100%}
.meta .info{flex:1;text-align:left}
.meta .info .title{font-weight:700;color:var(--ins);margin-bottom:6px}
.meta .info .small{font-size:13px;color:#cfd9ff}

.lista-prints{
  display:flex;flex-wrap:wrap;gap:10px;
}
.thumb{
  width:120px;background:rgba(255,255,255,0.02);
  border-radius:8px;padding:10px;
  cursor:pointer;border:1px solid rgba(255,255,255,0.02);
}
.thumb img{
  width:100%;height:70px;object-fit:cover;border-radius:6px;margin-bottom:4px;
}
.thumb .txt small{color:#cfd9ff;font-size:11px;text-align:center}

.panel-bottom{
  position:fixed;left:18px;bottom:18px;
  display:flex;gap:8px;align-items:center;flex-wrap:wrap;
  z-index:9999;
}
.panel-card{
  background:rgba(255,255,255,0.95);color:#000;
  padding:6px;border-radius:10px;
  display:flex;gap:6px;align-items:center;
  box-shadow:0 6px 24px rgba(0,0,0,0.3);
}
.panel-card img{
  width:48px;height:48px;border-radius:8px;object-fit:cover;
}
.panel-card .nome{font-weight:700;font-size:12px}
.panel-card .tipo{font-size:10px;color:#333}

.voltar{
  position:fixed;right:18px;bottom:18px;
  background:var(--ins);color:#fff;border:none;
  padding:12px;border-radius:10px;cursor:pointer;
  box-shadow:0 8px 30px rgba(0,0,0,0.6);z-index:9999;
}


/* ===========================
      SCROLLBAR AZUL
=========================== */
::-webkit-scrollbar{width:10px;height:10px;}
::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);border-radius:10px;}
::-webkit-scrollbar-thumb{
  background:var(--ins);border-radius:10px;
  box-shadow:0 0 8px rgba(0,140,255,0.4);
}
::-webkit-scrollbar-thumb:hover{background:#0073d6;}

*{scrollbar-width:thin;scrollbar-color:var(--ins) rgba(255,255,255,0.05);}


/* ===========================
      RESPONSIVIDADE TOTAL
=========================== */
@media(max-width:1024px){
  .main{flex-direction:column;padding:12px;}
  .right{width:100%;max-width:100%;height:auto;}
  .left{width:100%;}
  .grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));}
}

@media(max-width:480px){
  .header .inner{flex-direction:column;text-align:center;}
  .main{flex-direction:column;padding:10px;}
  .left h2{text-align:center;}
  .grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;}
  .pasta img{width:55px;}
  .right{width:100%;max-width:100%;height:auto;padding:12px;}
  .thumb{width:100px;}
  #largeImg{max-height:40vh;}
  .panel-bottom{
    bottom:10px;left:10px;right:10px;
    justify-content:center;flex-wrap:wrap;gap:4px;
  }
  .panel-card img{width:40px;height:40px;}
}

@media(max-width:360px){
  .grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));}
  .thumb{width:90px;}
  .panel-card{padding:4px;}
  .panel-card img{width:34px;height:34px;}
}

</style>
</head>
<body>

<!-- CURSOR -->
<div class="custom-cursor">
  <img src="https://www.habbo.com.br/habbo-imaging/badge/b09064s43131s50134s17113s171153f3edc7f555be912c2392e285b05bd34.gif">
</div>

<!-- LOADING -->
<div id="loading">
  <div class="loader"></div>
  Carregando dados...
</div>

<!-- APP -->
<div class="app">

  <header class="header">
    <div class="inner">
      <img class="logo" src="https://i.imgur.com/2HJ0aLw.png">
      <div>
        <div style="font-weight:700;color:#fff">Aulas monitoradas pelo L2ro</div>
        <div style="font-size:12px;color:#dfeaff">Selecione uma pasta para visualizar</div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="left">
      <h2 style="color:#fff;margin:8px 0 14px">Instrutores</h2>
      <div class="grid" id="gridInstrutores"></div>
    </div>

    <div class="right">
      <div id="emptyMsg" style="color:#cfd9ff">
        Selecione um instrutor
      </div>

      <div id="viewArea" style="display:none">
        <div class="preview">
          <img id="largeImg" src="">
          <div class="meta">
            <div class="info">
              <div class="title" id="metaTitle"></div>
              <div class="small" id="metaSub"></div>
            </div>
            <button onclick="openOriginal()" style="background:var(--ins);padding:10px 12px;border-radius:8px;border:none;color:#fff;cursor:pointer">
              Abrir original
            </button>
          </div>
        </div>

        <hr style="width:100%;opacity:.1;margin:14px 0">

        <div style="display:flex;justify-content:space-between;margin-bottom:10px">
          <div style="font-weight:700;color:#fff">Prints</div>
          <div id="countPrints" style="color:#cfd9ff;font-size:13px"></div>
        </div>

        <div class="lista-prints" id="listaPrints"></div>
      </div>
    </div>
  </div>

  <button class="voltar" onclick="location.reload()">⤺ Reiniciar</button>

  <div class="panel-bottom" id="panelBottom" style="display:none"></div>
</div>


<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxGQdwKcNbsvJn4IyxMaMEpLEccUQZcSAJUw_mCFLvu7mDJ8yWDfTVYvuVDQZuy2eSX/exec";

/* Cursor */
const cursor=document.querySelector(".custom-cursor");
document.addEventListener("mousemove",e=>{
  cursor.style.top=e.clientY+"px";
  cursor.style.left=e.clientX+"px";
});

/* Utils */
function el(t,c){const d=document.createElement(t);if(c)d.className=c;return d;}
function escapeHtml(s){return s? s.replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])):"";}

/* UI refs */
const grid=document.getElementById("gridInstrutores");
const viewArea=document.getElementById("viewArea");
const emptyMsg=document.getElementById("emptyMsg");
const listaPrints=document.getElementById("listaPrints");
const largeImg=document.getElementById("largeImg");
const metaTitle=document.getElementById("metaTitle");
const metaSub=document.getElementById("metaSub");
const countPrints=document.getElementById("countPrints");
const panelBottom=document.getElementById("panelBottom");

/* Load data */
let GLOBAL_DATA=[];

function carregarDados(){
  fetch(API_URL)
    .then(r=>r.json())
    .then(j=>{
      GLOBAL_DATA=j;
      renderPastas(j);
      document.getElementById("loading").style.display="none";
    })
    .catch(e=>{
      console.error(e);
      document.getElementById("loading").innerHTML="Erro ao carregar dados.";
    });
}

function renderPastas(list){
  grid.innerHTML="";
  list.forEach(inst=>{
    const card=el("div","pasta");
    card.innerHTML=`
      <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png">
      <h3>${escapeHtml(inst.instrutor)}</h3>
      <div style="font-size:12px;color:#cfd9ff">${inst.items.length} prints</div>
    `;
    card.onclick=()=>abrirInstrutor(inst.instrutor);
    grid.appendChild(card);
  });
}

function abrirInstrutor(nome){
  const inst=GLOBAL_DATA.find(x=>x.instrutor===nome);
  if(!inst)return;

  emptyMsg.style.display="none";
  viewArea.style.display="block";

  listaPrints.innerHTML="";
  if(inst.items.length>0) mostrarPrint(inst,inst.items[0]);

  inst.items.forEach(item=>{
    const t=el("div","thumb");
    t.innerHTML=`
      <img src="${item.print}">
      <div class="txt"><small>${escapeHtml(item.data)}</small></div>
    `;
    t.onclick=()=>mostrarPrint(inst,item);
    listaPrints.appendChild(t);
  });

  countPrints.innerText=inst.items.length+" prints";
  renderPanel(inst);
}

function mostrarPrint(instr,item){
  largeImg.src=item.print;
  metaTitle.innerText=instr.instrutor;
  metaSub.innerText="Data: "+(item.data||"—");
}

function renderPanel(inst){
  panelBottom.innerHTML="";
  panelBottom.style.display="flex";

  // Instrutor
  const cardI=el("div","panel-card");
  cardI.innerHTML=`
    <img src="${inst.avatarInstrutor}">
    <div><div class="nome">${inst.instrutor}</div><div class="tipo">Instrutor</div></div>
  `;
  panelBottom.appendChild(cardI);

  // Alunos
  inst.alunos.forEach(a=>{
    const c=el("div","panel-card");
    c.innerHTML=`
      <img src="${a.avatar}">
      <div>
        <div class="nome">${a.nick}</div>
        <div class="tipo">Aluno</div>
      </div>`;
    panelBottom.appendChild(c);
  });
}

function openOriginal(){
  window.open(largeImg.src,"_blank");
}

carregarDados();
</script>

</body>
</html>
